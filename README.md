<<<<<<< HEAD
# ãƒ«ãƒ¼ãƒˆæœ€é©åŒ–ã‚¢ãƒ—ãƒª

Excelã®ä½æ‰€ãƒªã‚¹ãƒˆã‹ã‚‰æœ€é©ãªè¨ªå•é †åºã‚’è¨ˆç®—ã—ã€è»Šãƒ»é›»è»Šä¸¡æ–¹ã®ãƒ¢ãƒ¼ãƒ‰ã«å¯¾å¿œã—ãŸãƒ«ãƒ¼ãƒˆæœ€é©åŒ–ã‚¢ãƒ—ãƒªã§ã™ã€‚

## ðŸš€ ä¸»ãªæ©Ÿèƒ½

- **è»Šãƒ¢ãƒ¼ãƒ‰**: OpenRouteService(ORS)ã‚’ä½¿ç”¨ã—ãŸæœ¬æ ¼çš„ãªãƒ«ãƒ¼ãƒˆæœ€é©åŒ–
- **é›»è»Šãƒ¢ãƒ¼ãƒ‰**: è·é›¢ãƒ™ãƒ¼ã‚¹TSP + é›»è»Šãƒ«ãƒ¼ãƒˆæ¤œç´¢ãƒªãƒ³ã‚¯ç”Ÿæˆï¼ˆGoogle Maps / NAVITIMEï¼‰
- **Excelèª­ã¿è¾¼ã¿**: ä½æ‰€ã€è¨ªå•å…ˆã€ãƒ¡ãƒ¢ãªã©ã®ä¸€æ‹¬å–ã‚Šè¾¼ã¿
- **åœ°å›³è¡¨ç¤º**: MapLibre GL JS ã«ã‚ˆã‚‹ç•ªå·ä»˜ããƒ”ãƒ³ã¨æœ€é©ãƒ«ãƒ¼ãƒˆã®å¯è¦–åŒ–
- **PDFå‡ºåŠ›**: åœ°å›³ã¨è¨ªå•é †åºä¸€è¦§ã‚’å«ã‚€å°åˆ·å¯èƒ½ãªãƒ¬ãƒãƒ¼ãƒˆ

## ðŸ“‹ å¿…è¦ãªç’°å¢ƒ

- Node.js 16+
- OpenRouteService API ã‚­ãƒ¼ï¼ˆè»Šãƒ¢ãƒ¼ãƒ‰ç”¨ï¼‰

## ðŸ› ï¸ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
cd client && npm install && cd ..
```

### 2. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`.env.sample`ã‚’`.env`ã«ã‚³ãƒ”ãƒ¼ã—ã€OpenRouteService API ã‚­ãƒ¼ã‚’è¨­å®šï¼š

```bash
cp .env.sample .env
```

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ï¼š
```env
ORS_API_KEY=your_openrouteservice_api_key_here
PORT=3000
```

### OpenRouteService API ã‚­ãƒ¼ã®å–å¾—æ–¹æ³•

1. [OpenRouteService](https://openrouteservice.org/dev/#/signup) ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²
2. API ã‚­ãƒ¼ã‚’å–å¾—ï¼ˆç„¡æ–™ãƒ—ãƒ©ãƒ³ã§1æ—¥2000ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰
3. ä¸Šè¨˜ã®`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®š

## ðŸš€ èµ·å‹•æ–¹æ³•

### é–‹ç™ºç’°å¢ƒ
```bash
npm run dev
```
ã‚µãƒ¼ãƒï¼ˆhttp://localhost:3000ï¼‰ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆhttp://localhost:5173ï¼‰ãŒåŒæ™‚èµ·å‹•

### æœ¬ç•ªç’°å¢ƒ
```bash
npm run build
npm start
```

## ðŸ“Š Excel ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼

| åˆ—åï¼ˆä¾‹ï¼‰ | å¿…é ˆ | èª¬æ˜Ž |
|------------|------|------|
| ä½æ‰€ | âœ“ | è¨ªå•å…ˆã®ä½æ‰€ |
| è¨ªå•å…ˆ | - | æ–½è¨­åãƒ»ä¼šç¤¾åãªã© |
| ãƒ¡ãƒ¢ | - | å‚™è€ƒãƒ»è©³ç´°æƒ…å ± |
| æ»žåœ¨åˆ† | - | æ»žåœ¨äºˆå®šæ™‚é–“ï¼ˆæ•°å€¤ï¼‰ |
| å¸Œæœ›åˆ°ç€æ™‚åˆ» | - | HH:MM å½¢å¼ |

### ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
```
ä½æ‰€,è¨ªå•å…ˆ,ãƒ¡ãƒ¢
"æ±äº¬éƒ½æ¸‹è°·åŒºæ¸‹è°·2-21-1","æ¸‹è°·ãƒ’ã‚«ãƒªã‚¨","ä¼šè­°"
"æ±äº¬éƒ½æ–°å®¿åŒºè¥¿æ–°å®¿2-8-1","æ±äº¬éƒ½åº","æ‰‹ç¶šã"
"æ±äº¬éƒ½åƒä»£ç”°åŒºä¸¸ã®å†…1-6-1","ä¸¸ã®å†…ã‚ªã‚¢ã‚¾","æ‰“ã¡åˆã‚ã›"
```

## ðŸŽ¯ ä½¿ç”¨æ–¹æ³•

1. **ãƒ¢ãƒ¼ãƒ‰é¸æŠž**: è»ŠðŸš— ã¾ãŸã¯ é›»è»ŠðŸšƒ ã‚’é¸æŠž
2. **å‡ºç™ºåœ°ãƒ»ã‚´ãƒ¼ãƒ«åœ°**: ä½æ‰€ã‚’å…¥åŠ›
3. **Excelãƒ•ã‚¡ã‚¤ãƒ«**: è¨ªå•å…ˆä½æ‰€ãƒªã‚¹ãƒˆã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
4. **é–‹å§‹**: æœ€é©ãƒ«ãƒ¼ãƒˆã‚’è¨ˆç®—ãƒ»è¡¨ç¤º
5. **PDFå‡ºåŠ›**: çµæžœã‚’A4ã‚µã‚¤ã‚ºã§ä¿å­˜

### è»Šãƒ¢ãƒ¼ãƒ‰
- OpenRouteServiceã®æœ€é©åŒ–APIã‚’ä½¿ç”¨
- å®Ÿéš›ã®é“è·¯è·é›¢ã¨æ‰€è¦æ™‚é–“ã§æœ€çŸ­ãƒ«ãƒ¼ãƒˆã‚’è¨ˆç®—
- åœ°å›³ä¸Šã«è©³ç´°ãªãƒ«ãƒ¼ãƒˆãƒ©ã‚¤ãƒ³è¡¨ç¤º

### é›»è»Šãƒ¢ãƒ¼ãƒ‰  
- è·é›¢ãƒžãƒˆãƒªã‚¯ã‚¹ï¼ˆç›´ç·šè·é›¢ or å¾’æ­©OSRMï¼‰ã‹ã‚‰TSPã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§é †åºæœ€é©åŒ–
- å„åŒºé–“ã«é›»è»Šãƒ«ãƒ¼ãƒˆæ¤œç´¢ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆ
- Google Maps Transit / NAVITIME / Yahoo!ä¹—æ›æ¡ˆå†…ã«å¯¾å¿œ

## ðŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (Express)
```
server.js                 # ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒãƒ¼
server/routes/            # APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  â”œâ”€â”€ geocode.js         # ä½æ‰€â†’åº§æ¨™å¤‰æ›
  â””â”€â”€ optimize.js        # è»Šãƒ«ãƒ¼ãƒˆæœ€é©åŒ–
server/services/
  â””â”€â”€ ors.js             # OpenRouteServiceé€£æº
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (React + Vite)
```
client/src/
  â”œâ”€â”€ App.jsx            # ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  â”œâ”€â”€ map.js             # MapLibre GL JS ãƒ©ãƒƒãƒ‘ãƒ¼
  â”œâ”€â”€ excel.js           # SheetJS Excelè§£æž
  â”œâ”€â”€ tsp.js             # TSPã‚½ãƒ«ãƒãƒ¼ï¼ˆé›»è»Šãƒ¢ãƒ¼ãƒ‰ï¼‰
  â”œâ”€â”€ transit.js         # é›»è»Šãƒ«ãƒ¼ãƒˆãƒªãƒ³ã‚¯ç”Ÿæˆ
  â”œâ”€â”€ pdf.js             # html2pdf.js ãƒ©ãƒƒãƒ‘ãƒ¼
  â”œâ”€â”€ utils.js           # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
  â””â”€â”€ index.css          # ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©
```

## ðŸ”§ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: React, Vite, MapLibre GL JS
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Node.js, Express
- **åœ°å›³**: OpenStreetMap + MapLibre
- **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: OpenRouteService API
- **Excelè§£æž**: SheetJS (xlsx)
- **PDFå‡ºåŠ›**: html2pdf.js
- **æœ€é©åŒ–**: 2-opt TSPã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼ˆé›»è»Šãƒ¢ãƒ¼ãƒ‰ï¼‰

## ðŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

ãƒ¢ãƒã‚¤ãƒ«ãƒ‡ãƒã‚¤ã‚¹ã§ã‚‚ä½¿ã„ã‚„ã™ã„ã‚ˆã†ã€ç”»é¢ã‚µã‚¤ã‚ºã«å¿œã˜ã¦ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒèª¿æ•´ã•ã‚Œã¾ã™ã€‚

## ðŸš¨ åˆ¶é™äº‹é …

- è»Šãƒ¢ãƒ¼ãƒ‰: OpenRouteService APIã®åˆ©ç”¨åˆ¶é™ï¼ˆç„¡æ–™ãƒ—ãƒ©ãƒ³ã¯1æ—¥2000ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰
- é›»è»Šãƒ¢ãƒ¼ãƒ‰: å®Ÿéš›ã®é›»è»Šæ™‚åˆ»è¡¨ã¯ä½¿ç”¨ã›ãšã€è·é›¢ãƒ™ãƒ¼ã‚¹ã®è¿‘ä¼¼è¨ˆç®—
- ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°: æ—¥æœ¬ã®ä½æ‰€ã«æœ€é©åŒ–æ¸ˆã¿

## ðŸŽ¨ ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚º

### è·é›¢è¨ˆç®—æ–¹æ³•ã®å¤‰æ›´ï¼ˆé›»è»Šãƒ¢ãƒ¼ãƒ‰ï¼‰
`client/src/tsp.js`ã®`TSPSolver`ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§è·é›¢ãƒžãƒˆãƒªã‚¯ã‚¹é–¢æ•°ã‚’æŒ‡å®šï¼š

```javascript
// ç›´ç·šè·é›¢ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
const tsp = new TSPSolver();

// OSRMå¾’æ­©è·é›¢
import { osrmDistanceMatrix } from './tsp.js';
const tsp = new TSPSolver(osrmDistanceMatrix);
```

### åœ°å›³ã‚¹ã‚¿ã‚¤ãƒ«ã®å¤‰æ›´
`client/src/map.js`ã®MapLibreè¨­å®šã‚’ç·¨é›†ã—ã¦ã‚¿ã‚¤ãƒ«ã‚½ãƒ¼ã‚¹ã‚„ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å¤‰æ›´å¯èƒ½ã€‚

## ðŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **åœ°å›³ãŒè¡¨ç¤ºã•ã‚Œãªã„**
   - ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§MapLibreé–¢é€£ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª
   - CSSèª­ã¿è¾¼ã¿ã‚’ç¢ºèª

2. **ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒå¤±æ•—ã™ã‚‹**
   - ORS API ã‚­ãƒ¼ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
   - APIã‚¯ã‚©ãƒ¼ã‚¿ã®æ®‹é‡ã‚’ç¢ºèª

3. **Excelãƒ•ã‚¡ã‚¤ãƒ«ãŒèª­ã¿è¾¼ã‚ãªã„**
   - ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ãŒ .xlsx ã¾ãŸã¯ .xls ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
   - å¿…é ˆåˆ—ã€Œä½æ‰€ã€ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

## ðŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ðŸ¤ è²¢çŒ®

Pull Request ã‚„ Issue ã§ã®è²¢çŒ®ã‚’æ­“è¿Žã—ã¾ã™ã€‚

## ðŸ“ž ã‚µãƒãƒ¼ãƒˆ

æŠ€è¡“çš„ãªå•é¡Œã‚„æ”¹å–„ææ¡ˆãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€GitHub Issues ã§ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚
=======
# route-planner-
è¤‡æ•°ä½æ‰€ã®ãƒ«ãƒ¼ãƒˆæœ€é©åŒ–ã‚¢ãƒ—ãƒª
>>>>>>> ad7e81f554f5b9defdcff702e616fb063de22287
